{%- if paginator.pages -%}
    {%- set pages = paginator.pages -%}
{%- elif section.pages -%}
    {%- set pages = section.pages -%}
{%- else -%}
    {%- set pages = term.pages -%}
{%- endif -%}

{# Simple approach: manually order the specific featured items first #}
{%- set final_pages = [] -%}

{# Add SystematicsAPI first (weight 1) #}
{%- for page in pages -%}
    {%- if page.extra.featured and page.title == "Resource Library" -%}
        {%- set_global final_pages = final_pages | concat(with=page) -%}
    {%- endif -%}
{%- endfor -%}

{# Add Adaptive Capital second (weight 2) #}
{%- for page in pages -%}
    {%- if page.extra.featured and page.title == "Adaptive Capital" -%}
        {%- set_global final_pages = final_pages | concat(with=page) -%}
    {%- endif -%}
{%- endfor -%}

{# Add Neon Flea Circus third (weight 3) #}
{%- for page in pages -%}
    {%- if page.extra.featured and page.title == "Fistfull of I.O.U's" -%}
        {%- set_global final_pages = final_pages | concat(with=page) -%}
    {%- endif -%}
{%- endfor -%}

{# Add all non-featured items alphabetically #}
{%- set regular_pages = [] -%}
{%- for page in pages -%}
    {%- if not page.extra.featured -%}
        {%- set_global regular_pages = regular_pages | concat(with=page) -%}
    {%- endif -%}
{%- endfor -%}
{%- set sorted_regular = regular_pages | sort(attribute="title") -%}
{%- set final_pages = final_pages | concat(with=sorted_regular) -%}

<div id="article-list">
	{%- for page in final_pages %}
		{%- if page.draft -%}
			{%- set article_type = "draft" -%}
			{%- set article_string = macros_translate::translate(key="drafted", default="Drafted", language_strings=language_strings) -%}
		{%- elif page.extra.archive -%}
			{%- set article_type = "archive" -%}
			{%- set article_string = macros_translate::translate(key="archived", default="Archived", language_strings=language_strings) -%}
		{%- elif page.extra.featured -%}
			{%- set article_type = "featured" -%}
			{%- set article_string = macros_translate::translate(key="featured", default="Featured", language_strings=language_strings) -%}
		{%- elif page.extra.hot -%}
			{%- set article_type = "hot" -%}
			{%- set article_string = macros_translate::translate(key="hot", default="Hot", language_strings=language_strings) -%}
		{%- elif page.extra.poor -%}
			{%- set article_type = "poor" -%}
			{%- set article_string = macros_translate::translate(key="poor", default="Poor", language_strings=language_strings) -%}
		{%- endif -%}
		{%- if page.extra.banner -%}
			{%- set blurnail = resize_image(path=page.colocated_path ~ page.extra.banner, width=4, height=2, op="fill", format="webp") -%}
		{%- endif -%}
		<article {% if article_type %}class="{{ article_type }}"{% endif %} {% if blurnail %}style="--blurnail: url('{{ blurnail.url }}')"{% endif %}>
			<a href="{{ page.permalink | safe }}"></a>
			{% if article_type %}
				<span class="badge">
					<i class="icon"></i>
					{{- article_string -}}
				</span>
			{%- endif %}
			<h3>{{ page.title }}</h3>
			{%- if page.description %}
				{{ page.description | markdown | safe }}
			{%- endif %}
			{%- if page.date -%}
				<div class="details">
					<small>
						<time datetime="{{ page.date | date(format='%+') }}" pubdate>
							{{- page.date | date(format=date_format, locale=date_locale) -}}
						</time>
						{%- if page.authors -%}
							<span> {{ config.extra.separator | default(value="â€¢") }} {% include "partials/authors.html" -%}</span>
						{%- endif -%}
					</small>
					{%- if page.taxonomies -%}
						{%- for name, taxon in page.taxonomies %}
							<small>
								<ul class="tags">
									{%-for item in taxon -%}
										<li><a class="tag" href="{{ get_taxonomy_url(kind=name, name=item, lang=lang) }}">{{ item }}</a></li>
									{%- endfor %}
								</ul>
							</small>
						{%- endfor -%}
					{%- endif %}
				</div>
			{%- endif -%}
		</article>
	{%- endfor %}
</div>
