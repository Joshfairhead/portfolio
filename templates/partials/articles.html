{%- if paginator.pages -%}
    {%- set pages = paginator.pages -%}
{%- elif section.pages -%}
    {%- set pages = section.pages -%}
{%- else -%}
    {%- set pages = term.pages -%}
{%- endif -%}

<div id="article-list">
	{%- for page in pages %}
		{%- if page.draft -%}
			{%- set article_type = "draft" -%}
			{%- set article_string = macros_translate::translate(key="drafted", default="Drafted", language_strings=language_strings) -%}
		{%- elif page.extra.archive -%}
			{%- set article_type = "archive" -%}
			{%- set article_string = macros_translate::translate(key="archived", default="Archived", language_strings=language_strings) -%}
		{%- elif page.extra.featured -%}
			{%- set article_type = "featured" -%}
			{%- set article_string = macros_translate::translate(key="featured", default="Featured", language_strings=language_strings) -%}
		{%- elif page.extra.hot -%}
			{%- set article_type = "hot" -%}
			{%- set article_string = macros_translate::translate(key="hot", default="Hot", language_strings=language_strings) -%}
		{%- elif page.extra.poor -%}
			{%- set article_type = "poor" -%}
			{%- set article_string = macros_translate::translate(key="poor", default="Poor", language_strings=language_strings) -%}
		{%- endif -%}
		{%- if page.extra.banner -%}
			{%- if page.taxonomies.book_tags -%}
				{%- set thumbnail = resize_image(path=page.colocated_path ~ page.extra.banner, width=120, height=180, op="fit", format="webp") -%}
				{%- set is_book = true -%}
			{%- else -%}
				{%- set thumbnail = resize_image(path=page.colocated_path ~ page.extra.banner, width=200, height=150, op="fill", format="webp") -%}
				{%- set is_book = false -%}
			{%- endif -%}
		{%- endif -%}
		<article {% if article_type %}class="{{ article_type }}"{% elif is_book %}class="book-review"{% endif %}>
			<a href="{{ page.permalink | safe }}" class="article-link"></a>
			{%- if thumbnail -%}
				<div class="article-thumbnail{% if is_book %} book-cover{% endif %}" style="background-image: url('{{ thumbnail.url }}')"></div>
			{%- else -%}
				<div class="article-thumbnail article-thumbnail-placeholder"></div>
			{%- endif -%}
			<div class="article-content">
				<div class="article-header">
					{% if article_type %}
						<span class="badge">
							<i class="icon"></i>
							{{- article_string -}}
						</span>
					{%- endif %}
					<h3>{{ page.title }}</h3>
					{%- if page.description %}
						<div class="article-description">
							{{ page.description | markdown | safe }}
						</div>
					{%- endif %}
				</div>
				{%- if page.date -%}
					<div class="details">
						<small>
							<time datetime="{{ page.date | date(format='%+') }}" pubdate>
								{{- page.date | date(format=date_format, locale=date_locale) -}}
							</time>
							{%- if page.authors -%}
								<span> {{ config.extra.separator | default(value="â€¢") }} {% include "partials/authors.html" -%}</span>
							{%- endif -%}
						</small>
					</div>
				{%- endif -%}
			</div>
		</article>
	{%- endfor %}
</div>
